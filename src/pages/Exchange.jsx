import { useState } from "react";
import Select from "../components/Select";
import RadioSelect from "../components/SelectRadio";
import AsideFilter from "../components/AsideFilter";
import UserProduct from "../components/Product/UserProduct";
import FilterCategories from "../components/Project/FilterCategories";

const sortOptions = [
  {
    id: 1,
    value: "default",
    name: "По умолчанию",
    icon: null,
  },
  {
    id: 2,
    value: "expensive",
    name: "Сначала дорогие",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M13 0.75C13 0.335786 12.6642 0 12.25 0C11.8358 0 11.5 0.335786 11.5 0.75V13.3219L10.0529 11.7432C9.77297 11.4379 9.29855 11.4172 8.99321 11.6971C8.68787 11.977 8.66724 12.4515 8.94714 12.7568L11.6971 15.7568C11.8392 15.9118 12.0398 16 12.25 16C12.4602 16 12.6608 15.9118 12.8029 15.7568L15.5529 12.7568C15.8328 12.4515 15.8121 11.977 15.5068 11.6971C15.2015 11.4172 14.727 11.4379 14.4471 11.7432L13 13.3219V0.75ZM0.75 1.5C0.335786 1.5 0 1.83579 0 2.25C0 2.66421 0.335786 3 0.75 3H9.25C9.66421 3 10 2.66421 10 2.25C10 1.83579 9.66421 1.5 9.25 1.5H0.75ZM3 5.25C3 4.83579 3.33579 4.5 3.75 4.5H9.25C9.66421 4.5 10 4.83579 10 5.25C10 5.66421 9.66421 6 9.25 6H3.75C3.33579 6 3 5.66421 3 5.25ZM6.75 7.5C6.33579 7.5 6 7.83579 6 8.25C6 8.66421 6.33579 9 6.75 9H9.25C9.66421 9 10 8.66421 10 8.25C10 7.83579 9.66421 7.5 9.25 7.5H6.75Z"
          fill="#787E87"
          fillOpacity="0.6"
        />
      </svg>
    ),
  },
  {
    id: 3,
    value: "cheap",
    name: "Сначала дешёвые",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M3 15.25C3 15.6642 3.33578 16 3.75 16C4.16421 16 4.5 15.6642 4.5 15.25L4.5 2.6781L5.94713 4.25679C6.22703 4.56213 6.70145 4.58276 7.00679 4.30287C7.31213 4.02297 7.33276 3.54855 7.05286 3.24321L4.30286 0.243205C4.16081 0.0882339 3.96023 -1.05255e-06 3.75 -1.07093e-06C3.53977 -1.08931e-06 3.33919 0.0882338 3.19713 0.243205L0.447132 3.2432C0.167237 3.54854 0.187864 4.02297 0.493204 4.30286C0.798543 4.58276 1.27297 4.56213 1.55286 4.25679L3 2.6781L3 15.25ZM15.25 14.5C15.6642 14.5 16 14.1642 16 13.75C16 13.3358 15.6642 13 15.25 13L6.75 13C6.33579 13 6 13.3358 6 13.75C6 14.1642 6.33579 14.5 6.75 14.5L15.25 14.5ZM13 10.75C13 11.1642 12.6642 11.5 12.25 11.5L6.75 11.5C6.33579 11.5 6 11.1642 6 10.75C6 10.3358 6.33579 10 6.75 10L12.25 10C12.6642 10 13 10.3358 13 10.75ZM9.25 8.5C9.66421 8.5 10 8.16421 10 7.75C10 7.33579 9.66421 7 9.25 7L6.75 7C6.33579 7 6 7.33579 6 7.75C6 8.16421 6.33579 8.5 6.75 8.5L9.25 8.5Z"
          fill="#787E87"
          fillOpacity="0.6"
        />
      </svg>
    ),
  },
  {
    id: 4,
    value: "high_float",
    name: "Сначала высокий флоат",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M13 0.75C13 0.335786 12.6642 0 12.25 0C11.8358 0 11.5 0.335786 11.5 0.75V13.3219L10.0529 11.7432C9.77297 11.4379 9.29855 11.4172 8.99321 11.6971C8.68787 11.977 8.66724 12.4515 8.94714 12.7568L11.6971 15.7568C11.8392 15.9118 12.0398 16 12.25 16C12.4602 16 12.6608 15.9118 12.8029 15.7568L15.5529 12.7568C15.8328 12.4515 15.8121 11.977 15.5068 11.6971C15.2015 11.4172 14.727 11.4379 14.4471 11.7432L13 13.3219V0.75ZM0.75 1.5C0.335786 1.5 0 1.83579 0 2.25C0 2.66421 0.335786 3 0.75 3H9.25C9.66421 3 10 2.66421 10 2.25C10 1.83579 9.66421 1.5 9.25 1.5H0.75ZM3 5.25C3 4.83579 3.33579 4.5 3.75 4.5H9.25C9.66421 4.5 10 4.83579 10 5.25C10 5.66421 9.66421 6 9.25 6H3.75C3.33579 6 3 5.66421 3 5.25ZM6.75 7.5C6.33579 7.5 6 7.83579 6 8.25C6 8.66421 6.33579 9 6.75 9H9.25C9.66421 9 10 8.66421 10 8.25C10 7.83579 9.66421 7.5 9.25 7.5H6.75Z"
          fill="#787E87"
          fillOpacity="0.6"
        />
      </svg>
    ),
  },
  {
    id: 5,
    value: "low_float",
    name: "Сначала низкий флоат",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M3 15.25C3 15.6642 3.33578 16 3.75 16C4.16421 16 4.5 15.6642 4.5 15.25L4.5 2.6781L5.94713 4.25679C6.22703 4.56213 6.70145 4.58276 7.00679 4.30287C7.31213 4.02297 7.33276 3.54855 7.05286 3.24321L4.30286 0.243205C4.16081 0.0882339 3.96023 -1.05255e-06 3.75 -1.07093e-06C3.53977 -1.08931e-06 3.33919 0.0882338 3.19713 0.243205L0.447132 3.2432C0.167237 3.54854 0.187864 4.02297 0.493204 4.30286C0.798543 4.58276 1.27297 4.56213 1.55286 4.25679L3 2.6781L3 15.25ZM15.25 14.5C15.6642 14.5 16 14.1642 16 13.75C16 13.3358 15.6642 13 15.25 13L6.75 13C6.33579 13 6 13.3358 6 13.75C6 14.1642 6.33579 14.5 6.75 14.5L15.25 14.5ZM13 10.75C13 11.1642 12.6642 11.5 12.25 11.5L6.75 11.5C6.33579 11.5 6 11.1642 6 10.75C6 10.3358 6.33579 10 6.75 10L12.25 10C12.6642 10 13 10.3358 13 10.75ZM9.25 8.5C9.66421 8.5 10 8.16421 10 7.75C10 7.33579 9.66421 7 9.25 7L6.75 7C6.33579 7 6 7.33579 6 7.75C6 8.16421 6.33579 8.5 6.75 8.5L9.25 8.5Z"
          fill="#787E87"
          fillOpacity="0.6"
        />
      </svg>
    ),
  },
];

export default function MainPage() {
  const [selectedItems, setSelectedItem] = useState([]);
  const [sort, setSort] = useState(sortOptions[0]);
  const [showSortModal, setShowSortModal] = useState(false);

  return (
    <div className="flex flex-col container mx-auto  gap-4 h-full flex-1">
      <FilterCategories />
      <div className="flex w-full   gap-8">
        <AsideFilter />
        <div className="flex flex-col   gap-4 w-full">
          <div className="flex h-fit justify-between w-full">
            <div className="items-center justify-between w-full flex gap-3">
              <div className="flex gap-2">
                <button className="btn btn-secondary !px-2">
                  <svg
                    width="21"
                    height="20"
                    viewBox="0 0 21 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M19.5117 9.00146C19.2465 9.00146 18.9922 9.10682 18.8046 9.29436C18.6171 9.48189 18.5117 9.73625 18.5117 10.0015C18.5236 11.8745 17.882 13.693 16.6974 15.1439C15.5127 16.5948 13.8593 17.5871 12.0217 17.9501C10.1841 18.313 8.2775 18.0238 6.63022 17.1322C4.98295 16.2407 3.69813 14.8026 2.99704 13.0657C2.29596 11.3288 2.22251 9.40178 2.78934 7.61654C3.35617 5.8313 4.52779 4.2996 6.10242 3.28524C7.67705 2.27089 9.55612 1.83738 11.416 2.05938C13.2758 2.28137 15.0001 3.14498 16.2917 4.50146H13.8917C13.6265 4.50146 13.3722 4.60682 13.1846 4.79436C12.9971 4.98189 12.8917 5.23625 12.8917 5.50146C12.8917 5.76668 12.9971 6.02103 13.1846 6.20857C13.3722 6.39611 13.6265 6.50146 13.8917 6.50146H18.4217C18.6869 6.50146 18.9413 6.39611 19.1288 6.20857C19.3164 6.02103 19.4217 5.76668 19.4217 5.50146V1.00146C19.4217 0.736248 19.3164 0.481894 19.1288 0.294358C18.9413 0.106821 18.6869 0.00146455 18.4217 0.00146455C18.1565 0.00146455 17.9022 0.106821 17.7146 0.294358C17.5271 0.481894 17.4217 0.736248 17.4217 1.00146V2.77146C15.7564 1.17952 13.5925 0.211417 11.2957 0.0307936C8.99901 -0.14983 6.71035 0.468109 4.81664 1.78015C2.92293 3.0922 1.54033 5.01787 0.90255 7.23165C0.26477 9.44544 0.410932 11.8115 1.31633 13.93C2.22173 16.0484 3.83082 17.7893 5.87162 18.8583C7.91241 19.9273 10.2597 20.2589 12.5168 19.7969C14.7738 19.335 16.8021 18.1079 18.2589 16.3231C19.7156 14.5383 20.5114 12.3053 20.5117 10.0015C20.5117 9.73625 20.4064 9.48189 20.2188 9.29436C20.0313 9.10682 19.7769 9.00146 19.5117 9.00146Z"
                      fill="white"
                    />
                  </svg>
                </button>
              </div>
              <div className="relative">
                <button
                  className="btn btn-secondary min-h-[42px] flex items-center !px-2  min-w-[250px] !justify-between !text-gray-100 gap-2"
                  onClick={() => setShowSortModal(!showSortModal)}
                >
                  {sort.name}
                  <svg
                    width="10"
                    height="6"
                    viewBox="0 0 10 6"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M0.182992 0.374643C0.300196 0.257474 0.459139 0.191652 0.624866 0.191652C0.790594 0.191652 0.949536 0.257474 1.06674 0.374643L4.99987 4.30777L8.93299 0.374643C8.99064 0.314949 9.05961 0.267335 9.13586 0.234579C9.21211 0.201824 9.29413 0.184583 9.37711 0.183861C9.4601 0.18314 9.5424 0.198954 9.61921 0.23038C9.69602 0.261805 9.7658 0.308213 9.82449 0.366896C9.88317 0.425579 9.92958 0.495362 9.961 0.572172C9.99243 0.648982 10.0082 0.731281 10.0075 0.814269C10.0068 0.897256 9.98956 0.979268 9.9568 1.05552C9.92405 1.13177 9.87643 1.20074 9.81674 1.25839L5.44174 5.63339C5.32454 5.75056 5.16559 5.81638 4.99987 5.81638C4.83414 5.81638 4.6752 5.75056 4.55799 5.63339L0.182992 1.25839C0.0658222 1.14119 0 0.982246 0 0.816518C0 0.65079 0.0658222 0.491848 0.182992 0.374643Z"
                      fill="#787E87"
                    />
                  </svg>
                </button>

                {showSortModal && (
                  <div className="absolute top-full right-0 mt-2 z-50 w-80">
                    <RadioSelect
                      options={sortOptions}
                      defaultValue={sort}
                      onChange={(option) => {
                        setSort(option);
                        setShowSortModal(false);
                      }}
                    />
                  </div>
                )}
              </div>
            </div>
          </div>
          <div className="grid overflow-y-auto max-h-[870px] 2xl:grid-cols-6 grid-cols-5 gap-7">
            {Array.from({ length: 100 }).map((_, index) => (
              <UserProduct
                key={index}
                isAuthor={index % 2 === 0}
                product={{
                  name: `Наклейка|Titan ${index + 1}`,
                  image: "/assets/images/skins/knife.png",
                  price: "361 215.18",
                  rarity: "field_tested",
                  phase: 0.05721636621,
                  condition: 50,
                }}
              />
            ))}
          </div>
        </div>
      </div>
    </div>
  );
}
