import { useState } from "react";
import Select from "../components/Select";
import RadioSelect from "../components/SelectRadio";
import AsideFilter from "../components/AsideFilter";
import ProductAddCart from "../components/Product/ProductAddCart";
import { showToast } from '../utils/toast';
const sortOptions = [
  {
    id: 1,
    value: "default",
    name: "По популярности",
    icon: null,
  },
  {
    id: 2,
    value: "price_high",
    name: "По цене (дорогие)",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M13 0.75C13 0.335786 12.6642 0 12.25 0C11.8358 0 11.5 0.335786 11.5 0.75V13.3219L10.0529 11.7432C9.77297 11.4379 9.29855 11.4172 8.99321 11.6971C8.68787 11.977 8.66724 12.4515 8.94714 12.7568L11.6971 15.7568C11.8392 15.9118 12.0398 16 12.25 16C12.4602 16 12.6608 15.9118 12.8029 15.7568L15.5529 12.7568C15.8328 12.4515 15.8121 11.977 15.5068 11.6971C15.2015 11.4172 14.727 11.4379 14.4471 11.7432L13 13.3219V0.75ZM0.75 1.5C0.335786 1.5 0 1.83579 0 2.25C0 2.66421 0.335786 3 0.75 3H9.25C9.66421 3 10 2.66421 10 2.25C10 1.83579 9.66421 1.5 9.25 1.5H0.75ZM3 5.25C3 4.83579 3.33579 4.5 3.75 4.5H9.25C9.66421 4.5 10 4.83579 10 5.25C10 5.66421 9.66421 6 9.25 6H3.75C3.33579 6 3 5.66421 3 5.25ZM6.75 7.5C6.33579 7.5 6 7.83579 6 8.25C6 8.66421 6.33579 9 6.75 9H9.25C9.66421 9 10 8.66421 10 8.25C10 7.83579 9.66421 7.5 9.25 7.5H6.75Z"
          fill="#787E87"
          fillOpacity="0.6"
        />
      </svg>
    ),
  },
  {
    id: 3,
    value: "price_low",
    name: "По цене (дешёвые)",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M3 15.25C3 15.6642 3.33578 16 3.75 16C4.16421 16 4.5 15.6642 4.5 15.25L4.5 2.6781L5.94713 4.25679C6.22703 4.56213 6.70145 4.58276 7.00679 4.30287C7.31213 4.02297 7.33276 3.54855 7.05286 3.24321L4.30286 0.243205C4.16081 0.0882339 3.96023 -1.05255e-06 3.75 -1.07093e-06C3.53977 -1.08931e-06 3.33919 0.0882338 3.19713 0.243205L0.447132 3.2432C0.167237 3.54854 0.187864 4.02297 0.493204 4.30286C0.798543 4.58276 1.27297 4.56213 1.55286 4.25679L3 2.6781L3 15.25ZM15.25 14.5C15.6642 14.5 16 14.1642 16 13.75C16 13.3358 15.6642 13 15.25 13L6.75 13C6.33579 13 6 13.3358 6 13.75C6 14.1642 6.33579 14.5 6.75 14.5L15.25 14.5ZM13 10.75C13 11.1642 12.6642 11.5 12.25 11.5L6.75 11.5C6.33579 11.5 6 11.1642 6 10.75C6 10.3358 6.33579 10 6.75 10L12.25 10C12.6642 10 13 10.3358 13 10.75ZM9.25 8.5C9.66421 8.5 10 8.16421 10 7.75C10 7.33579 9.66421 7 9.25 7L6.75 7C6.33579 7 6 7.33579 6 7.75C6 8.16421 6.33579 8.5 6.75 8.5L9.25 8.5Z"
          fill="#787E87"
          fillOpacity="0.6"
        />
      </svg>
    ),
  },
  {
    id: 4,
    value: "rare",
    name: "По редкости",
    icon: null,
  },
];

export default function MainPage() {
  const [selectedItems, setSelectedItems] = useState([]);
  const [sort, setSort] = useState(sortOptions[0]);
  const [showSortModal, setShowSortModal] = useState(false);
  const [items, setItems] = useState([
    ...Array.from({ length: 100 }).map((_, index) => ({
      id: index,
      name: `Наклейка|Titan ${index + 1}`,
      image: "/assets/images/skins/katovice.png",
      price: "361 215.18",
      rarity: "factory_new",
      phase: 0.05721636621,
      condition: 50,
    }))
  ]);

  const deleteItem = (id) => {
    showToast.itemRemoved("asdasd");
    setItems(items.filter((item) => item.id !== id));
  };

  return (
    <div className="flex flex-col container mx-auto gap-4 h-full flex-1">
      <div className="flex w-full rounded-xl justify-between items-center py-8 px-4 bg-accent-300">
        <div className="flex gap-2.5 items-center">
          <svg
            width="57"
            height="56"
            viewBox="0 0 57 56"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M53.0117 49H48.0117M3.51172 49H10.0117M10.0117 49V14C10.0117 10.134 13.1457 7 17.0117 7H41.0117C44.8777 7 48.0117 10.134 48.0117 14V49M10.0117 49H19.5117M48.0117 49H38.5117M38.5117 49C38.5117 49 39.5117 31.5 38.5117 31.5C38.0701 31.5 36.166 29.6475 34.1772 27.5786C31.3403 24.6275 26.6032 24.5537 23.7385 27.4778C21.6721 29.5869 19.7361 31.5 19.5117 31.5C19.0117 31.5 19.5117 49 19.5117 49M38.5117 49H19.5117M53.0117 16H3.51172"
              stroke="#787E87"
            />
          </svg>
          <div className="flex flex-col gap-1.5">
            <h1 className="text-white text-2xl font-semibold">Ваша витрина</h1>
            <p className="text-gray-100 text-lg font-semibold">
              Здесь, вы можете найти все свои выставленные предметы
            </p>
          </div>
        </div>
        <div className="flex gap-1 items-center">
          <button className="flex gap-1 items-center btn btn-border">
            <svg
              width="13"
              height="18"
              viewBox="0 0 13 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M8.99441 0.867942L12.3451 4.21446C12.4895 4.3586 12.5763 4.55046 12.5892 4.75404C12.6022 4.95762 12.5404 5.15893 12.4155 5.3202L12.346 5.39894L8.99524 8.75468C8.84485 8.90651 8.6421 8.99512 8.42851 9.00236C8.21493 9.00961 8.00664 8.93495 7.8463 8.79366C7.68596 8.65237 7.58568 8.45514 7.56599 8.24233C7.54631 8.02953 7.6087 7.81725 7.7404 7.64894L7.80993 7.5702L9.72821 5.64941H0.863068C0.657749 5.64958 0.459514 5.57435 0.306014 5.43799C0.152514 5.30163 0.054439 5.11365 0.0304167 4.90974L0.0253906 4.81173C0.0254177 4.60655 0.100745 4.40852 0.237084 4.2552C0.373424 4.10187 0.561294 4.00392 0.76506 3.97991L0.863068 3.97405H9.73408L7.81077 2.05326C7.66642 1.90912 7.57962 1.71726 7.56666 1.51368C7.55371 1.3101 7.61549 1.10879 7.7404 0.947521L7.80993 0.867942C7.95407 0.72359 8.14592 0.636794 8.3495 0.623839C8.55308 0.610884 8.75439 0.67266 8.91566 0.797577L8.99441 0.867942ZM12.5822 13.0905L12.588 13.1885C12.588 13.3937 12.5127 13.5917 12.3764 13.745C12.24 13.8984 12.0521 13.9963 11.8484 14.0203L11.7504 14.0262H2.88438L4.80602 15.947C4.95037 16.0911 5.03717 16.283 5.05012 16.4866C5.06308 16.6901 5.0013 16.8914 4.87638 17.0527L4.80686 17.1315C4.66272 17.2758 4.47086 17.3626 4.26728 17.3756C4.0637 17.3885 3.86239 17.3267 3.70112 17.2018L3.62154 17.1315L0.27083 13.7841C0.126602 13.6399 0.0399596 13.4479 0.0271589 13.2444C0.0143582 13.0408 0.0762785 12.8395 0.201303 12.6784L0.27083 12.5996L3.62154 9.24556C3.77194 9.09372 3.97468 9.00512 4.18827 8.99787C4.40186 8.99062 4.61014 9.06529 4.77048 9.20658C4.93083 9.34787 5.0311 9.5451 5.05079 9.7579C5.07048 9.9707 5.00808 10.183 4.87638 10.3513L4.80686 10.43L2.88857 12.3508H11.7504C11.9555 12.3509 12.1536 12.4262 12.3069 12.5625C12.4602 12.6989 12.5582 12.8867 12.5822 13.0905Z"
                fill="#F0F0F0"
              />
            </svg>
            Обмен
          </button>
          <button className="flex gap-1 items-center btn btn-border">
            <svg
              width="14"
              height="14"
              viewBox="0 0 14 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M0.351562 1.22897C0.351562 1.08086 0.410399 0.938814 0.515129 0.834084C0.619859 0.729354 0.761904 0.670517 0.910014 0.670517H1.3255C2.03287 0.670517 2.4573 1.14632 2.69929 1.58861C2.86087 1.88347 2.97778 2.22525 3.06936 2.535C3.09413 2.53305 3.11897 2.53205 3.14382 2.53202H12.4499C13.0679 2.53202 13.5146 3.12324 13.3449 3.71817L11.9837 8.49033C11.8617 8.91837 11.6035 9.29499 11.2483 9.56316C10.8931 9.83134 10.4601 9.97646 10.015 9.97656H5.58612C5.13749 9.97658 4.70127 9.82926 4.34451 9.55725C3.98775 9.28524 3.7302 8.90359 3.61143 8.47097L3.04553 6.40694L2.10733 3.24386L2.10659 3.23791C1.99043 2.81572 1.88172 2.42033 1.7194 2.12547C1.56378 1.8388 1.43868 1.78742 1.32625 1.78742H0.910014C0.761904 1.78742 0.619859 1.72858 0.515129 1.62385C0.410399 1.51912 0.351562 1.37708 0.351562 1.22897ZM5.19148 13.7011C5.58644 13.7011 5.96522 13.5442 6.2445 13.2649C6.52379 12.9856 6.68068 12.6068 6.68068 12.2119C6.68068 11.8169 6.52379 11.4381 6.2445 11.1588C5.96522 10.8795 5.58644 10.7227 5.19148 10.7227C4.79652 10.7227 4.41773 10.8795 4.13845 11.1588C3.85917 11.4381 3.70227 11.8169 3.70227 12.2119C3.70227 12.6068 3.85917 12.9856 4.13845 13.2649C4.41773 13.5442 4.79652 13.7011 5.19148 13.7011ZM10.4037 13.7011C10.7987 13.7011 11.1774 13.5442 11.4567 13.2649C11.736 12.9856 11.8929 12.6068 11.8929 12.2119C11.8929 11.8169 11.736 11.4381 11.4567 11.1588C11.1774 10.8795 10.7987 10.7227 10.4037 10.7227C10.0087 10.7227 9.62995 10.8795 9.35067 11.1588C9.07139 11.4381 8.91449 11.8169 8.91449 12.2119C8.91449 12.6068 9.07139 12.9856 9.35067 13.2649C9.62995 13.5442 10.0087 13.7011 10.4037 13.7011Z"
                fill="#F0F0F0"
              />
            </svg>
            Маркет
          </button>
        </div>
      </div>
      <div className="flex w-full gap-8">
        <div className="flex flex-col gap-4">
          <div className="flex h-fit justify-between w-full">
            <p className="text-gray-100 text-lg font-semibold">
              Обмен и Маркет
            </p>
            <div className="flex gap-3">
              <div className="flex gap-2">

                <button className="btn btn-secondary">Снять все</button>
                <button className="btn btn-secondary !px-2">
                  <svg
                    width="21"
                    height="20"
                    viewBox="0 0 21 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M19.5117 9.00146C19.2465 9.00146 18.9922 9.10682 18.8046 9.29436C18.6171 9.48189 18.5117 9.73625 18.5117 10.0015C18.5236 11.8745 17.882 13.693 16.6974 15.1439C15.5127 16.5948 13.8593 17.5871 12.0217 17.9501C10.1841 18.313 8.2775 18.0238 6.63022 17.1322C4.98295 16.2407 3.69813 14.8026 2.99704 13.0657C2.29596 11.3288 2.22251 9.40178 2.78934 7.61654C3.35617 5.8313 4.52779 4.2996 6.10242 3.28524C7.67705 2.27089 9.55612 1.83738 11.416 2.05938C13.2758 2.28137 15.0001 3.14498 16.2917 4.50146H13.8917C13.6265 4.50146 13.3722 4.60682 13.1846 4.79436C12.9971 4.98189 12.8917 5.23625 12.8917 5.50146C12.8917 5.76668 12.9971 6.02103 13.1846 6.20857C13.3722 6.39611 13.6265 6.50146 13.8917 6.50146H18.4217C18.6869 6.50146 18.9413 6.39611 19.1288 6.20857C19.3164 6.02103 19.4217 5.76668 19.4217 5.50146V1.00146C19.4217 0.736248 19.3164 0.481894 19.1288 0.294358C18.9413 0.106821 18.6869 0.00146455 18.4217 0.00146455C18.1565 0.00146455 17.9022 0.106821 17.7146 0.294358C17.5271 0.481894 17.4217 0.736248 17.4217 1.00146V2.77146C15.7564 1.17952 13.5925 0.211417 11.2957 0.0307936C8.99901 -0.14983 6.71035 0.468109 4.81664 1.78015C2.92293 3.0922 1.54033 5.01787 0.90255 7.23165C0.26477 9.44544 0.410932 11.8115 1.31633 13.93C2.22173 16.0484 3.83082 17.7893 5.87162 18.8583C7.91241 19.9273 10.2597 20.2589 12.5168 19.7969C14.7738 19.335 16.8021 18.1079 18.2589 16.3231C19.7156 14.5383 20.5114 12.3053 20.5117 10.0015C20.5117 9.73625 20.4064 9.48189 20.2188 9.29436C20.0313 9.10682 19.7769 9.00146 19.5117 9.00146Z"
                      fill="white"
                    />
                  </svg>
                </button>
              </div>

              <div className="relative ">
                <button
                  className="btn btn-secondary h-full flex  items-center !px-2 min-w-[250px] !justify-between !text-gray-100 gap-2"
                  onClick={() => setShowSortModal(!showSortModal)}
                >
                  {sort.name}
                  <svg
                    width="10"
                    height="6"
                    viewBox="0 0 10 6"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M0.182992 0.374643C0.300196 0.257474 0.459139 0.191652 0.624866 0.191652C0.790594 0.191652 0.949536 0.257474 1.06674 0.374643L4.99987 4.30777L8.93299 0.374643C8.99064 0.314949 9.05961 0.267335 9.13586 0.234579C9.21211 0.201824 9.29413 0.184583 9.37711 0.183861C9.4601 0.18314 9.5424 0.198954 9.61921 0.23038C9.69602 0.261805 9.7658 0.308213 9.82449 0.366896C9.88317 0.425579 9.92958 0.495362 9.961 0.572172C9.99243 0.648982 10.0082 0.731281 10.0075 0.814269C10.0068 0.897256 9.98956 0.979268 9.9568 1.05552C9.92405 1.13177 9.87643 1.20074 9.81674 1.25839L5.44174 5.63339C5.32454 5.75056 5.16559 5.81638 4.99987 5.81638C4.83414 5.81638 4.6752 5.75056 4.55799 5.63339L0.182992 1.25839C0.0658222 1.14119 0 0.982246 0 0.816518C0 0.65079 0.0658222 0.491848 0.182992 0.374643Z"
                      fill="#787E87"
                    />
                  </svg>
                </button>

                {showSortModal && (
                  <div className="absolute top-full right-0 mt-2 z-50 w-80">
                    <RadioSelect
                      options={sortOptions}
                      defaultValue={sort}
                      onChange={(option) => {
                        setSort(option);
                        setShowSortModal(false);
                      }}
                    />
                  </div>
                )}
              </div>
            </div>
          </div>
          <div className="grid 2xl:grid-cols-6 max-h-[815px] overflow-y-auto grid-cols-5 gap-5">
            {items.map((item) => (
              <ProductAddCart
                key={item.id}
                isInInventory={true}
                setSelectedItem={() => {
                  deleteItem(item.id);
                }}
                classNameBtn="!bg-primary/15 !border-primary/10"
                product={item}
              />
            ))}
          </div>
        </div>
        <AsideFilter />
      </div>
    </div>
  );
}
